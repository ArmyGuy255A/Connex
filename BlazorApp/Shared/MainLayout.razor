@using Tablazor
@inherits LayoutComponentBase
@inject TablazorJsInterop JsInterop


<PageTitle>BlazorApp</PageTitle>

<TablerPage>
    <TablerNavbarHeader ShowNotifications="false">
        <AuthorizeView>
            <Authorized>
                <TablerButton BootType="outline" href="/admin">Admin</TablerButton>
                <TablerButton BootType="outline" href="/swagger">Swagger</TablerButton>
            </Authorized>
            <NotAuthorized>
                <TablerButton BootType="ghost" href="/login">Login</TablerButton>
            </NotAuthorized>
        </AuthorizeView>
    </TablerNavbarHeader>
    <AuthorizeView>
        <Authorized>
            <TablerNavbar />
        </Authorized>
    </AuthorizeView>
    <TablerPageWrapper Title="MainLayout" Pretitle="Current Location:">
        @Body
    </TablerPageWrapper>
</TablerPage>

@code
{
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Console.WriteLine("Hello world");
    }
  
    private bool firstRender = true;
    
    // private string title = "MainLayout";
  
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (this.firstRender)
        {
    // await JavaScript.InvokeVoidAsync("initializeTooltips");
    // await JsInterop.Prompt("Hello World");
            await JsInterop.Print();
            await JsInterop.InitializeTooltips();
            await JsInterop.InitializeDropdowns();

      
            this.firstRender = false;
      
            //TODO: This is not refreshing the current page title
            // title = await JsInterop.GetPageTitle();

        }

    }

}